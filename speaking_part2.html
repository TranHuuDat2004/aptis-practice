<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speaking - Part 2</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="icon" href="img/favicon.png" type="image/x-icon">
</head>

<body>
    <header id="header-placeholder"></header>
    <div class="content-pusher">
        <div class="container">
            <div class="page-intro">
                <h1>Speaking - Part 2</h1>
                <p>Mi√™u t·∫£ tranh v√† tr·∫£ l·ªùi c√¢u h·ªèi</p>
            </div>
            <div class="explanation-box">
                <h3>üí° Ph∆∞∆°ng ph√°p luy·ªán t·∫≠p hi·ªáu qu·∫£</h3>
                <p>Trang web n√†y m√¥ ph·ªèng ƒëi·ªÅu ki·ªán thi b·∫±ng c√°ch cung c·∫•p c√¢u h·ªèi v√† ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c. V√¨ tr√¨nh duy·ªát
                    ch∆∞a h·ªó tr·ª£ ghi √¢m tr·ª±c ti·∫øp, h√£y l√†m theo c√°c b∆∞·ªõc sau:</p>
                <ul>
                    <li><strong>B∆∞·ªõc 1:</strong> M·ªü ·ª©ng d·ª•ng ghi √¢m tr√™n ƒëi·ªán tho·∫°i c·ªßa b·∫°n.</li>
                    <li><strong>B∆∞·ªõc 2:</strong> Tr√™n trang web, nh·∫•n n√∫t "‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi" v√† b·∫Øt ƒë·∫ßu ghi √¢m tr√™n
                        ƒëi·ªán tho·∫°i c√πng l√∫c.</li>
                    <li><strong>B∆∞·ªõc 3:</strong> Tr·∫£ l·ªùi c√¢u h·ªèi trong kho·∫£ng th·ªùi gian cho ph√©p. ƒê·ªìng h·ªì s·∫Ω gi√∫p b·∫°n
                        ki·ªÉm so√°t ƒë·ªô d√†i c√¢u tr·∫£ l·ªùi.</li>
                    <li><strong>B∆∞·ªõc 4:</strong> Sau khi ho√†n th√†nh, b·∫°n c√≥ th·ªÉ t·∫£i file ghi √¢m (MP3) l√™n c√°c c√¥ng c·ª• AI
                        nh∆∞ Google Studio, ChatGPT-4o, ho·∫∑c c√°c d·ªãch v·ª• s·ª≠a b√†i n√≥i chuy√™n d·ª•ng ƒë·ªÉ nh·∫≠n feedback.</li>
                </ul>
            </div>
            <!-- KHU V·ª∞C PH∆Ø∆†NG PH√ÅP -->
            <div class="method-guide-card">
                <h2>C·∫©m nang tr·∫£ l·ªùi Part 2</h2>
                <div class="method-step">
                    <h4>B1: T·ªïng quan b·ª©c tranh</h4>
                    <p>M·ªü ƒë·∫ßu b·∫±ng m·ªôt c√¢u chung. V√≠ d·ª•:</p>
                    <ul>
                        <li>Look at the picture/ In the picture, I can see ...</li>
                        <li>There is/ There are ... (including...) (place) Eg: room, supermarket</li>
                    </ul>
                </div>
                <div class="method-step">
                    <h4>B2: Mi√™u t·∫£ chi ti·∫øt v·ªÅ con ng∆∞·ªùi</h4>
                    <ul>
                        <li><strong>Ki·ªÉu t√≥c, Tu·ªïi t√°c:</strong> T√≥c d√†i/ng·∫Øn, tr·∫ª/gi√†...</li>
                        <li><strong>Trang ph·ª•c:</strong> a blue shirt, a white dress...</li>
                        <li><strong>H√†nh ƒë·ªông (Quan tr·ªçng nh·∫•t):</strong> <code>The man/woman is V-ing...</code>,
                            <code>The people are V-ing...</code>
                        </li>
                    </ul>
                </div>
                <div class="method-step">
                    <h4>B3: ƒê∆∞a ra d·ª± ƒëo√°n v·ªÅ nh√¢n v·∫≠t</h4>
                    <p>S·ª≠ d·ª•ng c√°c c·∫•u tr√∫c ph·ªèng ƒëo√°n:</p>
                    <ul>
                        <li><code>I guess/ suppose/ reckon...</code></li>
                        <li><code>It looks as if... + a sentence</code></li>
                        <li><code>He/She looks like + a noun/adjective</code></li>
                        <li><code>They seem to be...</code> / <code>They might be...</code></li>
                    </ul>
                </div>
                <div class="method-step">
                    <h4>B4: Mi√™u t·∫£ ƒë·ªëi t∆∞·ª£ng ph·ª• & v·ªã tr√≠</h4>
                    <ul>
                        <li><strong>Ph√≠a tr√™n/d∆∞·ªõi/tr√°i/ph·∫£i:</strong> At the top/bottom left/right side of this
                            picture...</li>
                        <li><strong>·ªû gi·ªØa:</strong> In the middle...</li>
                        <li><strong>Ti·ªÅn c·∫£nh/H·∫≠u c·∫£nh:</strong> In the foreground/ In the background...</li>
                    </ul>
                </div>
                <div class="method-step">
                    <h4>B5: N√™u suy nghƒ© c√° nh√¢n / B√¨nh lu·∫≠n</h4>
                    <p>K·∫øt th√∫c b·∫±ng m·ªôt c√¢u c·∫£m nh·∫≠n. V√≠ d·ª•:</p>
                    <ul>
                        <li><code>I like this picture because it reminds me of...</code></li>
                        <li><code>It looks like a typical day in a marketplace.</code></li>
                    </ul>
                </div>
            </div>

            <div class="page-intro">
                <p>Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p</p>
            </div>

            <!-- B·∫¢NG ƒêI·ªÄU KHI·ªÇN CH·ªåN CH·ª¶ ƒê·ªÄ -->
            <div id="topic-selector-grid" class="topic-grid">
                <!-- C√°c n√∫t ch·ªçn ch·ªß ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
            </div>

            <main id="speaking-container">
                <!-- Khu v·ª±c luy·ªán t·∫≠p s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
            </main>

        </div>
        <footer id="footer-placeholder"></footer>
    </div>
    <script src="js/main.js"></script>
    <script src="js/data-speaking.js"></script>
    <!-- Trong file speaking_part2.html -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const selectorContainer = document.getElementById('topic-selector-grid');
            const contentContainer = document.getElementById('speaking-container');
            const topics = speakingData.part2;

            if (!topics || topics.length === 0) {
                contentContainer.innerHTML = `<p class="error">Kh√¥ng c√≥ d·ªØ li·ªáu cho Speaking Part 2.</p>`;
                return;
            }

            topics.forEach((topic, index) => {
                const button = document.createElement('button');
                button.className = 'topic-selector-btn';
                button.textContent = `Ch·ªß ƒë·ªÅ ${index + 1}`;
                button.dataset.target = `#${topic.id}`;
                selectorContainer.appendChild(button);

                const card = document.createElement('div');
                card.className = 'quiz-card speaking-part2-card';
                card.id = topic.id;

                let tasksHTML = '';
                topic.tasks.forEach((task, i) => {
                    tasksHTML += `
                        <div class="speaking-task-container">
                            <p class="prompt-question"><strong>Nhi·ªám v·ª• ${i + 1}:</strong> ${task.question}</p>
                            <div class="timer-controls">
                                <button class="action-btn start-timer-btn" data-duration="${task.duration}">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi (B·∫•m gi·ªù)</button>
                                <div class="timer-display"><span class="time-left">${task.duration}</span>s</div>
                            </div>
                        </div>
                    `;
                });

                // Logic m·ªõi: L·∫•y text t·ª´ c√°c task v√† t·∫°o 1 audio player chung
                const sampleAnswersText = topic.tasks
                    .filter(t => t.sampleAnswer)
                    .map(t => {
                        const taskIndex = topic.tasks.findIndex(original => original === t) + 1;
                        return `<div class="sample-answer"><p><strong>C√¢u tr·∫£ l·ªùi m·∫´u (Nhi·ªám v·ª• ${taskIndex}):</strong> ${t.sampleAnswer}</p></div>`;
                    }).join('');

                let singleAudioPlayer = '';
                if (topic.audioSrc) {
                    singleAudioPlayer = `
                        <h4>Nghe c√¢u tr·∫£ l·ªùi m·∫´u:</h4>
                        <div class="audio-player-container" style="margin-bottom: 15px;">
                            <audio controls class="custom-audio-player" src="${topic.audioSrc}"></audio>
                        </div>
                    `;
                }

                card.innerHTML = `
                    <div class="card-header"><h2>${topic.title}</h2></div>
                    <img class="speaking-part2-image" src="${topic.imageSrc}" alt="${topic.title}">
                    <div class="tasks-wrapper">${tasksHTML}</div>
                    <div class="card-actions" style="margin-top: 25px; border-top: 1px dashed var(--border-color); padding-top: 25px;">
                        <button class="action-btn show-sample-btn">üìñ Xem c√¢u tr·∫£ l·ªùi m·∫´u</button>
                    </div>
                    <div class="sample-answer-wrapper" style="display: none;">
                        ${singleAudioPlayer}
                        <h4>ƒê·ªçc c√¢u tr·∫£ l·ªùi m·∫´u:</h4>
                        ${sampleAnswersText}
                    </div>
                `;
                contentContainer.appendChild(card);
            });

            // Logic hi·ªÉn th·ªã card (gi·ªØ nguy√™n)
            const allButtons = selectorContainer.querySelectorAll('.topic-selector-btn');
            const allCards = contentContainer.querySelectorAll('.speaking-part2-card');
            function showTopic(targetId) { /* ... code gi·ªØ nguy√™n ... */ allCards.forEach(card => card.classList.remove('active')); allButtons.forEach(btn => btn.classList.remove('active')); const targetCard = document.querySelector(targetId); const targetButton = selectorContainer.querySelector(`[data-target='${targetId}']`); if (targetCard) targetCard.classList.add('active'); if (targetButton) targetButton.classList.add('active'); }
            selectorContainer.addEventListener('click', function (e) { if (e.target.classList.contains('topic-selector-btn')) { showTopic(e.target.dataset.target); } });
            if (allButtons.length > 0) { showTopic(allButtons[0].dataset.target); }

            // Logic Timer v√† Show/Hide Answer (gi·ªØ nguy√™n)
            let activeTimer = null;
            contentContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('start-timer-btn')) { /* ... logic timer gi·ªØ nguy√™n ... */ if (activeTimer) { clearInterval(activeTimer.intervalId); activeTimer.button.textContent = '‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi (B·∫•m gi·ªù)'; activeTimer.button.disabled = false; activeTimer.timeLeftEl.textContent = activeTimer.button.dataset.duration; if (activeTimer.button === e.target) { activeTimer = null; return } } const button = e.target; const duration = parseInt(button.dataset.duration, 10); const timerDisplay = button.nextElementSibling; const timeLeftEl = timerDisplay.querySelector('.time-left'); let timeLeft = duration; timeLeftEl.textContent = timeLeft; button.textContent = '‚è±Ô∏è ƒêang ƒë·∫øm ng∆∞·ª£c...'; button.disabled = true; const intervalId = setInterval(() => { timeLeft--; timeLeftEl.textContent = timeLeft; if (timeLeft <= 0) { clearInterval(intervalId); button.textContent = 'H·∫øt gi·ªù! B·∫Øt ƒë·∫ßu l·∫°i'; button.disabled = false; activeTimer = null } }, 1000); activeTimer = { button, intervalId, timeLeftEl }; }
                if (e.target.classList.contains('show-sample-btn')) { /* ... logic xem ƒë√°p √°n gi·ªØ nguy√™n ... */ const button = e.target; const wrapper = button.closest('.card-actions').nextElementSibling; const isVisible = wrapper.style.display === 'block'; wrapper.style.display = isVisible ? 'none' : 'block'; button.textContent = isVisible ? 'üìñ Xem c√¢u tr·∫£ l·ªùi m·∫´u' : 'üôà ·∫®n c√¢u tr·∫£ l·ªùi m·∫´u'; }
            });
        });
    </script>

</body>

</html>