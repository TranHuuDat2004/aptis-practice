<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading - Part 4</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header id="header-placeholder"></header>
    <div class="content-pusher">
        <div class="container">
            <div class="page-intro">
                <h1>Reading - Part 4</h1>
                <p>N·ªëi c√¢u h·ªèi v·ªõi ng∆∞·ªùi n√≥i t∆∞∆°ng ·ª©ng</p>
            </div>
            <!-- THAY TH·∫æ H·ªòP GI·∫¢I TH√çCH ·ªû ƒê√ÇY -->
            <div class="explanation-box">
                <h3>üí° Ph∆∞∆°ng ph√°p h·ªçc Part 4</h3>
                <p>D·∫°ng b√†i n√†y y√™u c·∫ßu n·ªëi 7 c√¢u h·ªèi v·ªõi 4 ng∆∞·ªùi. C√¥ng c·ª• n√†y s·ª≠ d·ª•ng k√Ω hi·ªáu A, B, C, D ƒë·ªÉ b·∫°n d·ªÖ h√¨nh dung v√† h·ªçc thu·ªôc c√°c li√™n k·∫øt.</p>
                <p><strong>L∆∞u √Ω quan tr·ªçng:</strong>
                <ul>
                    <li>Trong k·ª≥ thi th·∫≠t, <strong>h·ªç s·∫Ω d√πng t√™n th·∫≠t</strong> (v√≠ d·ª•: John, Sarah, Emily, David) thay v√¨ A, B, C, D.</li>
                    <li>Th·ª© t·ª± c√°c ƒëo·∫°n vƒÉn c·ªßa nh·ªØng ng∆∞·ªùi n√†y c≈©ng s·∫Ω b·ªã <strong>x√°o tr·ªôn ng·∫´u nhi√™n</strong>.</li>
                    <li><strong>Nhi·ªám v·ª• c·ªßa b·∫°n l√† nh·ªõ c√°c c·∫∑p ƒë√°p √°n ƒëi chung v·ªõi nhau</strong>, v√≠ d·ª•: "Ng∆∞·ªùi ch√™ gi√° ƒë·∫Øt c≈©ng l√† ng∆∞·ªùi ph√†n n√†n v·ªÅ d·ªãch v·ª•". H√£y d√πng c√¢u chuy·ªán g·ª£i nh·ªõ ƒë·ªÉ ghi nh·ªõ c√°c li√™n k·∫øt n√†y.</li>
                </ul>
                </p>
            </div>
            <main id="quiz-container">
                <!-- N·ªôi dung Part 4 s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
            </main>
        </div>
        <footer id="footer-placeholder"></footer>
    </div>
    <script src="js/main.js"></script>
    <script src="js/data-reading.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const quizContainer = document.getElementById('quiz-container');
            const topics = readingData.part4;

            if (!topics || topics.length === 0) {
                quizContainer.innerHTML = `<p class="error">Kh√¥ng c√≥ d·ªØ li·ªáu cho Part 4.</p>`;
                return;
            }

            topics.forEach((topic, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card part4-card';

                let questionsHTML = '';
                topic.questions.forEach((q, i) => {
                    questionsHTML += `
                        <div class="part4-question" data-correct-answer="${topic.key[i]}">
                            <p>${i + 1}. ${q}</p>
                            <div class="part4-options">
                                <button class="option-btn" data-choice="A">A</button>
                                <button class="option-btn" data-choice="B">B</button>
                                <button class="option-btn" data-choice="C">C</button>
                                <button class="option-btn" data-choice="D">D</button>
                            </div>
                        </div>
                    `;
                });

                card.innerHTML = `
                    <div class="card-header">
                        <h2>ƒê·ªÅ b√†i ${index + 1}: ${topic.title}</h2>
                    </div>
                    <div class="part4-questions-container">${questionsHTML}</div>
                    <div class="feedback-message"></div>
                    <div class="card-actions">
                        <button class="action-btn check-answer-btn">Ki·ªÉm tra ƒë√°p √°n</button>
                        <button class="action-btn show-story-btn">Xem Key & C√¢u chuy·ªán</button>
                    </div>
                    <div class="answer-section" style="display: none;">
                        <h4>ƒê√°p √°n & C√¢u chuy·ªán</h4>
                        <p><strong>Key ƒë√∫ng:</strong> ${topic.key.join(' - ')}</p>
                        <p><strong>C√¢u chuy·ªán g·ª£i nh·ªõ:</strong> ${topic.story}</p>
                    </div>
                `;
                quizContainer.appendChild(card);
            });

            quizContainer.addEventListener('click', function(e) {
                // Ch·ªçn ƒë√°p √°n
                if (e.target.classList.contains('option-btn')) {
                    const parentOptions = e.target.parentElement;
                    parentOptions.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
                    e.target.classList.add('selected');
                }

                // Ki·ªÉm tra ƒë√°p √°n
                if (e.target.classList.contains('check-answer-btn')) {
                    const card = e.target.closest('.part4-card');
                    let correctCount = 0;
                    const questions = card.querySelectorAll('.part4-question');
                    questions.forEach(q => {
                        const selectedBtn = q.querySelector('.option-btn.selected');
                        const correctAnswer = q.dataset.correctAnswer;
                        q.classList.remove('correct', 'incorrect');
                        if (selectedBtn) {
                            if (selectedBtn.dataset.choice === correctAnswer) {
                                q.classList.add('correct');
                                correctCount++;
                            } else {
                                q.classList.add('incorrect');
                            }
                        }
                    });
                    const feedbackDiv = card.querySelector('.feedback-message');
                    feedbackDiv.innerHTML = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng <strong>${correctCount}/${questions.length}</strong> c√¢u.`;
                }

                // Xem key & c√¢u chuy·ªán
                if (e.target.classList.contains('show-story-btn')) {
                    const answerSection = e.target.closest('.card-actions').nextElementSibling;
                    const isVisible = answerSection.style.display === 'block';
                    answerSection.style.display = isVisible ? 'none' : 'block';
                }
            });
        });
    </script>
</body>
</html>